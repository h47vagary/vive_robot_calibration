# 标定块疑问

已经搞定，但是需要特定的标定方式才能，且与自己写的有出入，记录一下以便可以查找学习。

## 标定正常的步骤
1. 先插上针，记录 7 点标定法所需要的 7 个点到全局变量
2. 在示教器上的工具手的7点标定进行标定这 7 个记录点
3. 切换工具手，重新记录这 7 个点（带工具手）到全局变量 `先切非工具手，走到记录的点，再切回工具手，记录该点`
4. 在带工具手的情况下，将这 7 个点用来标定 Tracker2Tcp

## 疑问
### 示教器7点标定与自己写的7点标定的结果不同
示教器上的7点标定法 和 我自己写的代码标工具手的7点标定法，对同样的 7 个点进行标定。标定出来的结果不同，最明显的是，不止 X,Y,Z 偏移不同，姿态也是不同的。

#### 示教器7点标定算法标的:
- X偏移： 22.25023
- Y偏移： 2.59490
- Z偏移： 164.76836
- A旋转： -0.01461
- B旋转： 0.00000
- C旋转： -3.14151
`绕点精度可以`

#### 自己7点标定算法标的:
- X偏移： 20.76530
- Y偏移： 5.42939
- Z偏移： 163.01100
- A旋转： 0.00002
- B旋转： -0.00016
- C旋转： 3.14145
`绕点精度不行`

#### 自己测量距离的：
- X偏移： 20.5
- Y偏移： 3
- Z偏移： 151
- A旋转： 0
- B旋转： 0
- C旋转： 3.14159
`绕点精度不行`


### 在示教器7点标定基础上与自己7点标定基础上的追踪器标定结果不同
示教器标出来的可行
#### 示教器的
- X偏移： 1.04384
- Y偏移： -2.16283
- Z偏移： 106.927
```txt
point0 x:-482.363 y:-677.552 z:-565.32 A:1.57203 B:0.0218982 C:-2.0608
point1 x:-514.277 y:-710.496 z:-635.689 A:0.783392 B:0.33972 C:-1.91065
point2 x:-449.396 y:-708.319 z:-497.946 A:2.30394 B:-0.28817 C:-1.96003
point3 x:-543.183 y:-697.031 z:-555.597 A:1.88777 B:0.601985 C:-2.14954
point4 x:-484.912 y:-670.114 z:-577.175 A:1.58677 B:0.0208738 C:-2.06139
point5 x:-579.395 y:-674.961 z:-535.014 A:1.58725 B:0.0228519 C:-2.06171
point6 x:-621.028 y:-669.647 z:-627.311 A:1.58573 B:0.019678 C:-2.05989
Sphere
x1: -482.363 *px: -482.421 x1-*px: 0.057711
y1: -677.552 *py: -784.505 y1-*py: 106.954
z1: -565.32 *pz: -565.355 z1-*pz: 0.0352078
tool_calculate_7points ox: -482.421 oy: -784.505 oz: -565.355
tracker2tcp calibrate success
tcp2tracker_vec: [1.04384, -2.16283, 106.927]
```

#### 自己标的
- X偏移： 64.2724
- Y偏移： -20.6718
- Z偏移： 22.3853
```
point0 x:10.9981 y:-746.476 z:-1526.66 A:0.530695 B:0.026507 C:-1.59072
point1 x:6.97898 y:-763.939 z:-1587.5 A:-0.0779656 B:0.0237131 C:-1.54248
point2 x:17.5304 y:-787.645 z:-1478.91 A:1.28855 B:-0.0309715 C:-1.6252
point3 x:-46.4707 y:-758.542 z:-1511.4 A:0.488661 B:0.309624 C:-1.0604
point4 x:10.7599 y:-745.453 z:-1524.62 A:0.530198 B:0.0266968 C:-1.5908
point5 x:102.679 y:-746.77 z:-1534.16 A:0.528681 B:0.0255111 C:-1.5915
point6 x:92.8256 y:-742.741 z:-1651.18 A:0.529759 B:0.0267816 C:-1.59051
Sphere
x1: 10.9981 *px: -10.3494 x1-*px: 21.3474
y1: -746.476 *py: -813.162 y1-*py: 66.6862
z1: -1526.66 *pz: -1539.17 z1-*pz: 12.5142
tool_calculate_7points ox: -10.3494 oy: -813.162 oz: -1539.17
tracker2tcp calibrate success
tcp2tracker_vec: [64.2724, -20.6718, 22.3853]
PS E:\iNexbot\Project\VIVE_Spray\vive_robot_calibration\build> 
```
不是相同的7个点

#### 自己量的
- X偏移： 101
- Y偏移： 0
- Z偏移： 7.5


## 解答

经过验证，自己量的比 Tracker2Tcp 比标定出来的准，是因为填错了。修改为:
- X偏移： 7.5
- Y偏移： 0
- Z偏移： 101
就可以了，可以在这方向持续微调